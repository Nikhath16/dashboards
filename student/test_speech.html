<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Teacher</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='css/icons.min.css'>
    <link rel='stylesheet' type='text/css' media='screen' href='css/bootstrap.min.css'>
    <link rel='stylesheet' type='text/css' media='screen' href='css/dashboard.css'>
    <link rel="stylesheet" type="text/css" href="css/dataTables.bootstrap4.min.css" />



</head>

<body class="app-body">
    <div class="wrapper">

        <div class="content-page">
            <!-- header -->
            <header class="header header-fixed navbar-custom">
                <div class="container-fluid">
                    <div class="header-top">
                        <div class="header-school-logo">
                            <span class="school-logo"><img src="images/forsyth-default-logo.png" alt=""></span>
                            <span class="school-name">Forsyth County Schools</span>
                        </div>

                        <ul class="list-unstyled topnav-menu  mb-0 ml-auto">
                            <li class="dropdown notification-list">
                                <a class="nav-link dropdown-toggle nav-bell" href="#" id="dropdownbellnotification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-bell" aria-hidden="true"></i>
                                    <span class="badge badge-danger">4</span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right bell-dropdown" aria-labelledby="dropdownbellnotification">
                                    <!-- item-->
                                    <div class="dropdown-header noti-title">
                                        <h6 class="text-overflow m-0">Notifications </h6>
                                    </div>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                       <!--  <i class="fe-user"></i> -->
                                        <span>Notification 1 fgfgfgdfg fgfdgdfg gfdf</span>
                                    </a>
                                              <div class="dropdown-divider"></div>
                                              <a href="javascript:void(0);" class="dropdown-item notify-item">
                                       <!--  <i class="fe-user"></i> -->
                                        <span>Notification 2 gfgfg fgfgfgdfg fgfdgdfg gfdf</span>
                                    </a>
                                </div>
                            </li>
                            <li class="dropdown notification-list">
                                <a class="nav-link dropdown-toggle nav-user p-0" href="#" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span>Teacher:</span>
                                    <img src="images/user-1.jpg" alt="user-image" class="rounded-circle">
                                     
                                    <span class="pro-user-name ml-1">

                                        Geneva <i class="mdi mdi-chevron-down"></i> 
                                    </span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right profile-dropdown" aria-labelledby="dropdownMenuButton">
                                    <!-- item-->
                                  

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                        <i class="fe-user"></i>
                                        <span>My Account</span>
                                    </a>

                                
                                    <div class="dropdown-divider"></div>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                        <i class="fe-log-out"></i>
                                        <span>Logout</span>
                                    </a>

                                </div>
                            </li>
                        </ul>

                    </div>
                </div>
                <div class="header-bottom">
                    <nav class="navbar navbar-expand-lg navbar-light bg-light">
                        <a class="navbar-brand Learnyve-logo" href="#">
                            <img src="images/Learnyve_logo.png" alt="">
                        </a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                      <span class="navbar-toggler-icon"></span>
                    </button>
                        <div class="collapse navbar-collapse" id="navbarNav">
                            <ul class="navbar-nav">
                                <li class="nav-item ">
                                    <a class="nav-link" href="index.html">COURSE</a>
                                </li>

                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        GRADE & SCORE 
                            </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                        <a class="dropdown-item" href="#">My Scores</a>
                                        <a class="dropdown-item" href="#">Hours I Spent</a>
                                        <a class="dropdown-item" href="#">Skills Mastered</a>
                                        <a class="dropdown-item" href="#">Badges Earned</a>
                                </li>
                                <li class="nav-item active">
                                    <a class="nav-link" href="test-assignments.html">TEST & ASSIGNMENT  </a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        RESOURCES  
                            </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                        <a class="dropdown-item" href="#">CALENDAR</a>
                                        <a class="dropdown-item" href="#">ASSIGNED RESOURCES </a>
                                        <a class="dropdown-item" href="#">STANDERD RESOURCES</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        External APPS   
                            </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                        <a class="dropdown-item" href="#">SCORE</a>
                                        <a class="dropdown-item" href="#">ENGAEMENT</a>
                                        <a class="dropdown-item" href="#">SKILLS MATERY</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        PRACTICE   
                            </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                        <a class="dropdown-item" href="#">GOOGLE DRIVE</a>
                                        <a class="dropdown-item" href="#">GOOGLE CLASSROOM</a>
                                        <a class="dropdown-item" href="#">EXT LEARNING APPS</a>
                                        <a class="dropdown-item" href="#">CHAT</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                       Live SESSION    
                            </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                        <a class="dropdown-item" href="#">EMAIL/ MESSAGE</a>
                                        <a class="dropdown-item" href="#">DISCUSSION FORUM</a>
                                        <a class="dropdown-item" href="#">NOTICE</a>
                                        <a class="dropdown-item" href="#">VIDEO SESSION</a>
                                </li>

                            </ul>
                            </div>
                    </nav>
                    </div>

            </header>
            <div class="page-top text-dark" >
            <div class="container-fluid">
             <div class=" d-flex mb-2">
                                 
                <span> <b>Class :</b> PHYSICS / Fiber Optics class</span>
                <div class="dropdown dropdown">  <a id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">&nbsp;  <i class="fe-refresh-ccw " aria-hidden="true"> </i>  </a>  <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">  <li class="dropdown-item"> Course 1</li>  <li class="dropdown-item">Course 2</li>  <li class="dropdown-item">Course 3</li>  </ul>  </div>
<div class="ml-auto" ><b>  Teacher:</b> frth
</div>
                        </div>
             
            </div>
        </div>
            <!-- header end -->
            <div class="main">
   <div class="content">
                <div class="card">
                  <div class="card-header d-flex">
                            <div class="feed-header-title">
                                <h5 class="text-primary">Test you English Speaking and Reading Skills <i class="fe-info text-secondary ml-1" data-toggle="popover" data-placement="Right" title="Popover title" data-content="And here's some amazing content. It's very engaging. Right?"></i></h5>
                            </div>
                            <!-- <div class="ml-auto"><button type="button" class="btn btn-outline-secondary btn-sm" ><i class="fas fa-print"></i>&nbsp;Print Report</button></div> -->
                        </div>
                    <div class="card-body">  <div class=" d-flex mb-2 text-center ml-5">
                               <span class="text-center ml-5"><div id="audio">
  <p>
    <button id=startRecord onclick="startRecording()"><i class="fas fa-microphone-alt fa-2x text-secondary"></i></button>
    <button id=stopRecord onclick="stopRecording()"><i class="fas fa-microphone-alt fa-2x text-danger"></i></button>
    <!-- <span id=startRecord onclick="startRecording()"><i class="fas fa-microphone-alt fa-2x text-secondary"></i></span>
    <span id=stopRecord onclick="stopRecording()"><i class="fas fa-microphone-alt fa-2x text-danger"></i></span> -->
  </p>
  <p>
    <audio id=recordedAudio></audio>
  </p>
  <p>
    <a id=audioDownload></a>
  </p>
  <script >
      navigator.mediaDevices.getUserMedia({
    audio: true
  })
  .then(stream => {
    rec = new MediaRecorder(stream);
    rec.ondataavailable = e => {
      audio.push(e.data);
      if (rec.state == "inactive") {
        let blob = new Blob(audio, {
          type: 'audio/x-mpeg-3'
        });
        recordedAudio.src = URL.createObjectURL(blob);
        recordedAudio.controls = true;
        audioDownload.href = recordedAudio.src;
        audioDownload.download = 'audio.mp3';
        audioDownload.innerHTML = 'Download';
        submit(blob);
      }
    }
  })
  .catch(e => console.log(e));

// TODO: This needs work. Submit button currently does not do anything.
// Also, page does not get reloaded and therefore the results are not shown.
// The POST request has to be done without AJAX.
// TODO: This needs work. Submit button currently does not do anything.
// Also, page does not get reloaded and therefore the results are not shown.
// The POST request has to be done without AJAX.

function startRecording() {
  startRecord.disabled = true;
  stopRecord.disabled = false;
  audio = [];
  recordedAudio.controls = false;
  rec.start();
}

function stopRecording() {
  startRecord.disabled = false;
  stopRecord.disabled = true;
  rec.stop();
}

function submit(blob) {
  var reader = new window.FileReader();
  reader.readAsDataURL(blob);
  reader.onloadend = function() {
    var fd = new FormData();
    base64data = reader.result;
    console.log(base64data);
    fd.append('file', base64data, 'audio.mp3');
    $.ajax({
      type: 'POST',
      url: '/',
      data: fd,
      cache: false,
      processData: false,
      contentType: false,
      enctype: 'multipart/form-data'
    }).done(function(data) {
      console.log(data);
    });
  }
}

  </script>
</div></span>
<div class="ml-auto" ><a href="true_false.html"><button type="button" class="btn btn-outline-secondary btn-sm" >Get Transcripts</button></a>
</div>
                        </div></div>
                </div>
                
            </div>
            </div>

            </div>
            </div>

            <footer>
                <div id="overlay"></div>
            </footer>
            <script src='js/jquery.min.js'></script>
            <script src='js/bootstrap.bundle.min.js'></script>
            <script src="js/popper.min.js"></script>
            <script src='js/bootstrap.min.js'></script>
            <script src='js/app.js'></script>
            <script type="text/javascript" src="js/datatables.min.js"></script>
        <script src='js/script.js'></script>

</body>

</html>